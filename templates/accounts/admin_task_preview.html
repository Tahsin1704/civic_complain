{% extends 'accounts/base.html' %}

{% block content %}
<h2>Task Preview (Admin)</h2>

<p><strong>Task Code:</strong> {{ task.task_code }}</p>
<p><strong>Title:</strong> {{ task.title }}</p>
<p><strong>Category:</strong> {{ task.category }}</p>
<p><strong>Citizen:</strong> {{ task.citizen_name }}</p>
<p><strong>Location:</strong> {{ task.location }}</p>
<p><strong>Priority:</strong> {{ task.priority }}</p>
<p><strong>Status:</strong> {{ task.status }}</p>
<p><strong>Assigned To:</strong>
    {% if task.assigned_to %}
        {{ task.assigned_to.first_name }} {{ task.assigned_to.last_name }} ({{ task.assigned_to.email }})
    {% else %}
        <em>Not assigned</em>
    {% endif %}
</p>
<p><strong>Instructions:</strong> {{ task.instructions }}</p>
<p><strong>Estimated Time:</strong> {{ task.estimated_time }}</p>
<p><strong>Started At:</strong> {{ task.started_at|date:"d M Y, H:i" }}</p>
<p><strong>Completed At:</strong> {{ task.completed_at|date:"d M Y, H:i" }}</p>

{% if task.before_photo %}
    <p><strong>Before Photo:</strong></p>
    <img src="{{ task.before_photo.url }}" style="max-width:300px; border-radius:8px;">
{% endif %}
{% if task.after_photo %}
    <p><strong>After Photo:</strong></p>
    <img src="{{ task.after_photo.url }}" style="max-width:300px; border-radius:8px;">
{% endif %}

<hr>

<!-- Back Button -->
<a href="{% url 'admin_dashboard' %}" class="btn btn-secondary">â¬… Back to Dashboard</a>

<!-- Delete Button -->
<form action="{% url 'task_delete' task.id %}" method="post" style="display:inline;">
    {% csrf_token %}
    <button type="submit" class="btn btn-danger">Delete</button>
</form>

{% endblock %}
